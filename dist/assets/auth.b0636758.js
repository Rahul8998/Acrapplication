import{d as a}from"./index.645177e3.js";import{a as o}from"./index.2cf0d985.js";const u="http://127.0.0.1:5000/";class l{async login(e){return await o.post(u+"login",{hrms:e.username,password:e.password}).then(s=>(s.data.accessToken&&localStorage.setItem("user",JSON.stringify(s.data)),s.data))}logout(){localStorage.removeItem("user")}}var r=new l;const h=a("userauth",{state:()=>({users:{username:null,password:null},user:JSON.parse(localStorage.getItem("user")),logedIn:!!JSON.parse(localStorage.getItem("user"))}),actions:{async login(){try{const t=await r.login(this.users);this.user=t,this.user&&(console.log(this.user),this.logedIn=!0,this.router.push({path:"/"}),this.users.password=null)}catch(t){alert(t)}},async logout(){try{r.logout(),this.logedIn=!1,this.user=null,this.router.push({path:"/login"})}catch(t){alert(t)}}}});export{h as u};
