import{d as a}from"./index.2437c116.js";import{api as o}from"./axios.d40e821d.js";class u{async login(s){return await o.post("/login",{hrms:s.username,password:s.password}).then(e=>(e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data))}logout(){localStorage.removeItem("user")}}var r=new u;const n=a("userauth",{state:()=>({users:{username:null,password:null},user:JSON.parse(localStorage.getItem("user")),logedIn:!!JSON.parse(localStorage.getItem("user"))}),actions:{async login(){try{const t=await r.login(this.users);this.user=t,this.user&&(console.log(this.user),this.logedIn=!0,this.router.push({path:"/"}),this.users.password=null)}catch(t){alert(t)}},async logout(){try{r.logout(),this.logedIn=!1,this.user=null,this.router.push({path:"/login"})}catch(t){alert(t)}}}});export{n as u};
